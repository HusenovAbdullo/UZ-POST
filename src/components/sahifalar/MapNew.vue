<template>
    <section class="setting__section pb-120">
        <div class="container__customizemain pt-100 pb-120 round16">
            <div class="container">
                <div class="row g-4">
                    <div class="col-lg-12">
                        <div
                            class="overview__gitwrapper bgwhite round16 border p-3 d-flex flex-column align-items-center">
                            <!-- Buttons for filtering -->
                            <div class="flex-container mb-4">
                                <button class="burchak outline__btn" :class="{ 'active-btn': activeButton === 'all' }"
                                    @click="filterData('all')" style="font-size: 14px; padding: 8px 15px;">
                                    {{ $t('all') }}
                                </button>
                                <button class="burchak outline__btn"
                                    :class="{ 'active-btn': activeButton === 'one_step' }"
                                    @click="filterData('one_step')" style="font-size: 14px; padding: 8px 15px;">
                                    {{ $t('one_step') }}
                                </button>
                                <button class="burchak outline__btn" :class="{ 'active-btn': activeButton === 'ems' }"
                                    @click="filterData('ems')" style="font-size: 14px; padding: 8px 15px;">
                                    EMS
                                </button>


                                <!-- Search Form -->
                                <form @submit.prevent="searchData" class="d-flex align-items-center position-relative">
                                    <input v-model="searchQuery" type="text" placeholder="" class="faded-placeholder"
                                        style="padding: 3px 1px 12px; font-size: 14px; border: 1px solid var(--base); border-top-left-radius: 4px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 4px;"
                                        @input="updateSuggestions">
                                    <button type="submit" class="cmn--btni1 d-flex align-items-center"
                                        style="padding: 10px 15px; border-radius: 4px; font-size: 14px; border-top-left-radius: 0px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 0px;">
                                        <span><i class="bi bi-search fz-12" style="font-size: 12px;"></i></span>
                                        <span style="font-size: 14px;">{{ $t('search') }}</span>
                                    </button>
                                    <ul v-if="suggestions.length > 0"
                                        class="suggestions-list position-absolute bg-white shadow p-2">
                                        <li v-for="(suggestion, index) in suggestions" :key="index"
                                            class="suggestion-item p-1 cursor-pointer"
                                            @click="selectSuggestion(suggestion)">
                                            {{ suggestion }}
                                        </li>

                                    </ul>

                                </form>


                            </div>

                            <!-- Map Container -->
                            <div class="map-container">
                                <div id="map" class="leaflet-map-container"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</template>

<script>
import L from "leaflet";
import { defineComponent } from "vue";
import "leaflet/dist/leaflet.css";
import "leaflet.markercluster/dist/MarkerCluster.css";
import "leaflet.markercluster/dist/MarkerCluster.Default.css";
import "leaflet.markercluster";

export default defineComponent({
    name: "App",
    data() {
        return {
            url: "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
            attribution: '&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',
            zoom: 6,
            center: [41.2995, 65.2401],
            warehouses: [],
            markers: null,
            searchQuery: "",
            suggestions: [],
            map: null,
            activeButton: "all", // Default active button
        };
    },
    mounted() {
        this.fetchWarehouses();
        this.initializeMap();
    },
    methods: {
        async fetchWarehouses() {
            try {
                const response = await fetch("https://new.pochta.uz/api/v1/maps/post/offices/");
                const data = await response.json();
                this.warehouses = data.result;
                this.addMarkersToCluster();
            } catch (error) {
                console.error("Error fetching warehouse data:", error);
            }
        },
        initializeMap() {
            this.map = L.map("map", {
                center: this.center,
                zoom: this.zoom,
                maxBounds: L.latLngBounds([[-90, -180], [90, 180]]),
                maxBoundsViscosity: 1.0,
                zoomAnimation: false
            });
            L.tileLayer(this.url, {
                attribution: this.attribution,
            }).addTo(this.map);
            this.markers = L.markerClusterGroup();
            this.map.addLayer(this.markers);
        },
        addMarkersToCluster(filter = "all") {
            this.markers.clearLayers();

            // Ikonkalar uchun mos URL ni tanlash
            const customIcon = L.icon({
                iconUrl: filter === "ems"
                    ? "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyOC4yLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDEwODAgMTA4MCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTA4MCAxMDgwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojMTgzRTk4O30NCgkuc3Qxe2ZpbGw6I0ZGRkZGRjt9DQoJLnN0MntmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiMxODNFOTg7fQ0KCS5zdDN7ZmlsbDojRjA3ODI0O30NCgkuc3Q0e2ZpbGw6I0YwNzcwMDt9DQoJLnN0NXtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiNGMDc3MDA7fQ0KCS5zdDZ7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojM0IyQTk4O30NCjwvc3R5bGU+DQo8ZyBpZD0iTGF5ZXJfMSI+DQoJPGc+DQoJCTxnPg0KCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTkyMC4xLDQxMC4zYzAsMjk0LjctMjYzLDU1MC44LTM1MS41LDYyOC43Yy0xNi40LDE0LjQtNDAuOSwxNC40LTU3LjMsMA0KCQkJCWMtODguNS03Ny44LTM1MS41LTMzMy45LTM1MS41LTYyOC43YzAtMjA5LjksMTcwLjItMzgwLjEsMzgwLjEtMzgwLjFTOTIwLjEsMjAwLjQsOTIwLjEsNDEwLjN6Ii8+DQoJCQk8Y2lyY2xlIGNsYXNzPSJzdDEiIGN4PSI1MzkuNSIgY3k9IjQxMC4zIiByPSIyODAuOCIvPg0KCQk8L2c+DQoJCTxnPg0KCQkJPGc+DQoJCQkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTM2MS40LDUyNi4xaC03LjZ2LTEwLjJDMzU2LjMsNTE5LjcsMzU4LjgsNTIzLjUsMzYxLjQsNTI2LjF6Ii8+DQoJCQkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTQ5Mi42LDIzN2wtMTM4LjksOTQuMlY0MjhjNi40LTEwLjIsMTUuMy0xOS4xLDI1LjUtMjQuMmMyLjUtMS4zLDUuMS0yLjUsOC45LTMuOA0KCQkJCQljNi40LTIuNSwxNS4zLTMuOCwyMi45LTMuOGMzOC4yLDAsNzAuMSwzNC40LDcwLjEsNzYuNGMwLDYuNC0xLjMsMTQtMi41LDIwLjRjMCwxLjMtMS4zLDMuOC0xLjMsNS4xYy0xLjMsMi41LTIuNSw1LjEtMi41LDcuNg0KCQkJCQljLTEuMywxLjMtMS4zLDMuOC0yLjUsNS4xYy0yLjUsNi40LTYuNCwxMS41LTExLjUsMTUuM2gyODQuMVYzMjguNkw0OTIuNiwyMzd6IE01OTEuMSw0OTN2LTg2LjZsNDIsMTRWNDkzSDU5MS4xeiBNNzEwLjUsNDkzDQoJCQkJCWgtNDN2LTk2LjhsLTExMC44LTM2LjlWNDkzaC00Mi40VjI4NS42bDE5Ni4yLDY2VjQ5M3oiLz4NCgkJCQk8cG9seWdvbiBjbGFzcz0ic3QyIiBwb2ludHM9IjM1My43LDMzMS4yIDM1My43LDUyNi4xIDUwMS42LDUyNi4xIDQ5NCwzNzQgCQkJCSIvPg0KCQkJPC9nPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPGcgaWQ9IkxheWVyXzIiPg0KCTxnPg0KCQk8Zz4NCgkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik05MjAuMSw0MTAuM2MwLDI5NC43LTI2Myw1NTAuOC0zNTEuNSw2MjguN2MtMTYuNCwxNC40LTQwLjksMTQuNC01Ny4zLDANCgkJCQljLTg4LjUtNzcuOC0zNTEuNS0zMzMuOS0zNTEuNS02MjguN2MwLTIwOS45LDE3MC4yLTM4MC4xLDM4MC4xLTM4MC4xUzkyMC4xLDIwMC40LDkyMC4xLDQxMC4zeiIvPg0KCQkJPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iNTQwIiBjeT0iNDEwLjMiIHI9IjI4MC44Ii8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNzA2LjYsNDE2LjVjLTg1LjEsMC0xNzAsMC0yNTQuOCwwYzAtOC44LDAtMTcuMSwwLTI2LjFjMi4yLDIuOCw0LjEsNC44LDUuNyw3YzIuNiwzLjQsNi4yLDUuMSwxMC40LDUuMg0KCQkJCWMxOC41LDAuMSwzNywwLjEsNTUuNSwwYzQuMSwwLDcuNy0xLjYsMTAuMy00LjhjMy40LTQuMiw0LjMtOC45LDIuMi0xMy45Yy0yLjMtNS40LTYuOC04LTEyLjMtOC42Yy0xNC4xLTEuNS0yOC40LTIuOS00Mi41LTQuMw0KCQkJCWMtMi42LTAuMy00LjMtMS4xLTUuOS0zLjRjLTguOC0xMy4yLTE3LjctMjYuNC0yNi41LTM5LjVjLTkuOC0xNC42LTIzLjctMTkuNy00MC42LTE3Yy0xNC42LDIuMy0yOC45LDEzLjktMjguMywzMy42DQoJCQkJYzAuOCwyMS44LDAuMiw0My43LDAuMiw2NS41YzAsMiwwLDQuMSwwLDYuNmMtOSwwLTE3LjUsMC0yNS45LDBjMCw1LjcsMCwxMC45LDAsMTYuNGM4LjgsMCwxNy4yLDAsMjUuOSwwYzAsMS45LDAsMy41LDAsNS4xDQoJCQkJYzAsNDMuOCwwLDg3LjYsMCwxMzEuNGMwLDkuNCw2LDE2LjEsMTQuNiwxNi40YzguMywwLjMsMTQuOC02LDE1LjctMTVjMC43LTcuNSwxLjYtMTQuOCwyLjQtMjIuM2MyLTE4LjEsMy45LTM2LjEsNS45LTU0LjINCgkJCQljMC42LTUuNCwxLjItMTAuOCwxLjktMTYuMWMzLjgsMTAuMSw4LjMsMTkuNyw5LjMsMzAuNmMxLjksMjEuMiw0LjUsNDIuNSw3LDYzLjdjMC44LDYuMyw0LjQsMTAuOCwxMC43LDEyLjYNCgkJCQljMTAuMiwzLDE5LjItNC40LDE5LjItMTUuOWMwLjEtMjUsMC4xLTQ5LjksMC03NC45YzAtMi4xLTAuNS00LjMtMS02LjRjLTQuMS0xNS44LTguMi0zMS42LTEyLjMtNDcuM2MtMC42LTIuNS0xLjItNS0xLjktOA0KCQkJCWM4NS40LDAsMTcwLjMsMCwyNTUuMiwwQzcwNi42LDQyNy4yLDcwNi42LDQyMi4xLDcwNi42LDQxNi41eiBNNDUyLjksMjcwLjRjMC4xLTE3LjQtMTQuMi0zMS44LTMxLjUtMzEuOQ0KCQkJCWMtMTcuNC0wLjEtMzEuNywxNC4xLTMxLjgsMzEuNWMtMC4xLDE3LjYsMTQuMSwzMS45LDMxLjcsMzEuOEM0MzguNSwzMDEuOCw0NTIuOCwyODcuNSw0NTIuOSwyNzAuNHoiLz4NCgkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03MDYuNiw0MTYuNWMwLDUuNiwwLDEwLjcsMCwxNi4zYy04NC45LDAtMTY5LjcsMC0yNTUuMiwwYzAuNywzLDEuMiw1LjUsMS45LDhjNC4xLDE1LjgsOC4yLDMxLjUsMTIuMyw0Ny4zDQoJCQkJYzAuNiwyLjEsMSw0LjMsMSw2LjRjMC4xLDI1LDAuMSw0OS45LDAsNzQuOWMtMC4xLDExLjUtOSwxOC45LTE5LjIsMTUuOWMtNi4zLTEuOC05LjktNi4zLTEwLjctMTIuNmMtMi41LTIxLjItNS00Mi40LTctNjMuNw0KCQkJCWMtMS0xMC45LTUuNS0yMC41LTkuMy0zMC42Yy0wLjYsNS40LTEuMywxMC44LTEuOSwxNi4xYy0yLDE4LjEtMy45LDM2LjEtNS45LDU0LjJjLTAuOCw3LjQtMS43LDE0LjgtMi40LDIyLjMNCgkJCQljLTAuOSw5LjEtNy4zLDE1LjQtMTUuNywxNWMtOC42LTAuMy0xNC42LTctMTQuNi0xNi40YzAtNDMuOCwwLTg3LjYsMC0xMzEuNGMwLTEuNiwwLTMuMiwwLTUuMWMtOC43LDAtMTcuMiwwLTI1LjksMA0KCQkJCWMwLTUuNSwwLTEwLjgsMC0xNi40YzguNCwwLDE2LjksMCwyNS45LDBjMC0yLjUsMC00LjYsMC02LjZjMC0yMS45LDAuNi00My43LTAuMi02NS41Yy0wLjctMTkuNiwxMy43LTMxLjMsMjguMy0zMy42DQoJCQkJYzE2LjktMi43LDMwLjgsMi4zLDQwLjYsMTdjOC44LDEzLjIsMTcuOCwyNi4zLDI2LjUsMzkuNWMxLjUsMi4zLDMuMywzLjIsNS45LDMuNGMxNC4yLDEuNCwyOC40LDIuOCw0Mi41LDQuMw0KCQkJCWM1LjcsMC42LDEwLjEsMy4yLDEyLjMsOC42YzIuMSw1LDEuMiw5LjctMi4yLDEzLjljLTIuNiwzLjItNi4yLDQuOC0xMC4zLDQuOGMtMTguNSwwLjEtMzcsMC4xLTU1LjUsMGMtNC4yLDAtNy44LTEuNy0xMC40LTUuMg0KCQkJCWMtMS43LTIuMi0zLjQtNC4zLTUuNy03YzAsOSwwLDE3LjQsMCwyNi4xQzUzNi42LDQxNi41LDYyMS41LDQxNi41LDcwNi42LDQxNi41eiIvPg0KCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTQ1Mi45LDI3MC40Yy0wLjEsMTcuMS0xNC40LDMxLjQtMzEuNSwzMS41Yy0xNy42LDAtMzEuOC0xNC4yLTMxLjctMzEuOGMwLjEtMTcuMywxNC40LTMxLjUsMzEuOC0zMS41DQoJCQkJQzQzOC43LDIzOC42LDQ1Mi45LDI1Myw0NTIuOSwyNzAuNHoiLz4NCgkJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik02MzUuMiw0ODEuMWMtMTEuMywwLTIyLjEsMC0zMy4yLDBjMC00LjItMC4yLTguMiwwLjEtMTIuMWMwLjEtMS4xLDEuOS0yLjgsMy0yLjhjOS0wLjIsMTcuOS0wLjIsMjYuOSwwDQoJCQkJYzEuMSwwLDMsMS43LDMsMi44QzYzNS40LDQ3Mi45LDYzNS4yLDQ3Ni45LDYzNS4yLDQ4MS4xeiIvPg0KCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTYzMC4zLDIzNC44YzIuOCwwLjgsNS42LDEuNCw4LjMsMi40YzE3LjIsNi42LDI2LjUsMjUuNCwyMS40LDQzLjNjLTUsMTcuNS0yMy4zLDI4LjYtNDEuMSwyNC45DQoJCQkJYy0xOC4xLTMuNy0zMC41LTIwLjQtMjguNS0zOC43YzEuNy0xNS43LDEyLjgtMjgsMjguMy0zMS4zYzAuOC0wLjEsMS42LTAuNSwyLjMtMC44QzYyNC4xLDIzNC44LDYyNy4yLDIzNC44LDYzMC4zLDIzNC44eiIvPg0KCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTY3OS42LDQxMS45Yy0xLjItMTkuNC0yLjUtMzguNi0xMC43LTU2LjZjMCwxOC44LDAsMzcuNSwwLDU2LjZjLTI4LjgsMC01Ny4xLDAtODUuOSwwDQoJCQkJYzAtMTguNywwLTM3LjQsMC01Ni4yYy0wLjMtMC4xLTAuNy0wLjEtMS0wLjFjLTcuNiwxNy45LTguOCwzNy4yLTEwLDU2LjRjLTguNiwwLTE2LjcsMC0yNS40LDBjMC40LTYuNSwwLjctMTIuOCwxLjItMTkuMg0KCQkJCWMxLjQtMTUsMy45LTI5LjksOS40LTQ0YzQuOS0xMi41LDExLjctMjMuNSwyNC4xLTMwLjFjNi42LTMuNSwxMy42LTMuOSwyMC44LTMuNGMwLjksMC4xLDEuOSwxLjIsMi41LDIuMg0KCQkJCWM0LjQsNy4yLDguNywxNC40LDEzLjUsMjIuNGMxLjctNSwzLTguMyw0LjEtMTIuNmMwLjMtMS4xLTAuNS0zLjctMS4xLTQuOWMtMS4xLTIuMi0yLjMtNC40LTMuNy02LjljNS43LDAsMTEsMCwxNiwwDQoJCQkJYy0xLjQsMy45LTMuOSw3LjktMy45LDExLjhjMCw0LDIuMyw3LjksMy45LDEyLjdjMy43LTYuMiw3LjItMTEuOSwxMC42LTE3LjdjNC4zLTcuMyw0LjMtNy4zLDEyLjktNi45DQoJCQkJYzExLjIsMC42LDE5LjgsNi4zLDI2LjYsMTQuOGM2LjUsOCwxMC40LDE3LjIsMTMuNCwyN2M1LjQsMTcuOCw3LDM2LjIsNy44LDU0LjhDNjk2LjUsNDExLjksNjg4LjMsNDExLjksNjc5LjYsNDExLjl6DQoJCQkJIE02MzIuOCwzNjMuM2M4LjMsMCwxNi4yLDAsMjQsMGMwLTIuNiwwLTUsMC03LjVjLTguMSwwLTE2LDAtMjQsMEM2MzIuOCwzNTguNSw2MzIuOCwzNjAuOCw2MzIuOCwzNjMuM3oiLz4NCgkJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik01OTUuOCw0MTQuM3YtNDloLTc1LjR2NDlINTk1Ljh6Ii8+DQoJCQk8cGF0aCBjbGFzcz0ic3QzIiBkPSJNNTkyLjYsMzY4LjFoLTY5LjF2NDMuNWg2OS4xVjM2OC4xeiIvPg0KCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTcwNi42LDQ0MC44SDQ4MS4xVjU4NmgyMjUuNVY0NDAuOHoiLz4NCgkJPC9nPg0KCTwvZz4NCjwvZz4NCjxnIGlkPSJMYXllcl8yX2NvcHkiPg0KCTxnPg0KCQk8cGF0aCBjbGFzcz0ic3Q0IiBkPSJNOTIwLjEsNDEwLjNjMCwyOTQuNy0yNjMsNTUwLjgtMzUxLjUsNjI4LjdjLTE2LjQsMTQuNC00MC45LDE0LjQtNTcuMywwYy04OC41LTc3LjgtMzUxLjUtMzMzLjktMzUxLjUtNjI4LjcNCgkJCWMwLTIwOS45LDE3MC4yLTM4MC4xLDM4MC4xLTM4MC4xUzkyMC4xLDIwMC40LDkyMC4xLDQxMC4zeiIvPg0KCQk8Y2lyY2xlIGNsYXNzPSJzdDEiIGN4PSI1NDAiIGN5PSI0MTAuMyIgcj0iMjgwLjgiLz4NCgk8L2c+DQoJPGc+DQoJCTxwYXRoIGNsYXNzPSJzdDUiIGQ9Ik0zOTkuNCw0NjMuOWwxMy42LDE2bDQuMi0xNkgzOTkuNHogTTM3OS43LDQ0MC44bDEyLjEsMTQuMmgyNy44bDMuOC0xNC4ySDM3OS43eiBNMzU5LjksNDE3LjVsMTIuMywxNC41DQoJCQloNTMuNmwzLjktMTQuNUgzNTkuOXogTTM0MCwzOTQuMWwxMi4zLDE0LjVoNzkuN2wzLjktMTQuNUgzNDB6IE0zMjAuMiwzNzAuOGwxMi4zLDE0LjVoMTA1LjhsMy45LTE0LjVIMzIwLjJ6IE0zMDEuNiwzNDcuNA0KCQkJbC0wLjUsMWwxMS41LDEzLjVoMTMxLjlsMy45LTE0LjRMMzAxLjYsMzQ3LjR6Ii8+DQoJCTxwYXRoIGNsYXNzPSJzdDYiIGQ9Ik00MzMuNyw0NzguN2g2Ni43bDguOS0zMy42aC0zMC44bDQuMi0xNS43aDMwLjhsOC43LTMyLjdoLTMwLjdsNC4yLTE1LjdoMzAuN2w4LjktMzMuNWgtNjYuNWwtNC4yLDE1LjloNjAuNA0KCQkJbC0xLjYsNmgtNjAuNGwtNC42LDE3LjRoMzAuNWwtMS42LDUuOWgtMzAuNWwtNC43LDE3LjVoNjAuNGwtMS42LDZoLTYwLjRsLTQuNiwxNy4zaDMwLjVsLTEuNiw2aC0zMC41bC00LjYsMTcuM2g2MC40bC0xLjYsNg0KCQkJaC02MC40TDQzMy43LDQ3OC43eiBNNTE2LjYsNDc4LjdINTUxbDE5LjYtNzUuNmwtMC4zLDcuMWg0MC4zbC0zLDZoLTM3LjRsLTAuNiwxNy4zaDI5LjRsLTMsNmgtMjYuNWwtMC42LDE3LjNoMTguNGwtMyw2aC0xNS42DQoJCQlsLTAuNiwxNmgxNC4zbDM4LjEtNzUuN2wtMS45LDcuMmgyNy41bC0xLjUsNmgtMjcuNWwtNC42LDE3LjNoMjcuMmwtMS41LDZoLTI3LjJsLTQuNiwxNy4zaDI3LjRsLTEuNSw2aC0yNy41bC00LjMsMTZoMzIuOQ0KCQkJbDM0LjctMTMxLjJoLTQyLjhsLTguNiwxNS45bDQxLjQsMC4xbC0xLjUsNmwtNDMuMS0wLjFsLTkuNCwxNy40bDQ4LjEsMC4xbC0xLjUsNS45bC00OS44LTAuMWwtNS4zLDkuOGwwLjMtNTVoLTQ0LjJsLTQuMiwxNS45DQoJCQloNDNsLTAuMSw2aC00NC41bC00LjYsMTcuNEg1OTBsLTAuMSw1LjloLTUwLjVsLTQuNywxNy41SDU2M2wtMS42LDZoLTI4LjJsLTQuNiwxNy4zaDI4LjJsLTEuNiw2aC0yOC4ybC00LjYsMTcuM2gyOC4ybC0xLjYsNg0KCQkJaC0yOC4yTDUxNi42LDQ3OC43eiBNNjcwLjgsNDc4LjdoMzguOGwyMy41LTE2bDEzLjMtNTAuMWwtMTgtMTUuNmgtMjQuM2w0LjktMTcuOGgxMS41bC0xLjgsNy41aDUuOWwwLTAuMWgyNy4zbDYuMi0yMy4zDQoJCQlsLTE4LjUtMTUuOWgtMzcuNWwtMjMuNSwxNS45aDczLjZsLTEuNSw2aC03My44bC00LjcsMTcuNGgyOC4ybC0xLjUsNS45aC0yOC4zbC00LjcsMTcuNUg3NDFsLTEuNSw2aC03M2wxMy4xLDExLjRsMjguNS0wLjENCgkJCWwtMS42LDZoMjguN2wtMS41LDZoLTI4LjhsLTIsNy4yaC0xMy4xbDEuOS03LjJsLTMzLjMsMGwtNC42LDE3LjNoNzUuNGwtMS41LDZINjUzTDY3MC44LDQ3OC43eiIvPg0KCTwvZz4NCjwvZz4NCjwvc3ZnPg0K"
                    : filter === "one_step"
                        ? "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyOC4yLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDEwODAgMTA4MCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTA4MCAxMDgwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZGlzcGxheTpub25lO30NCgkuc3Qxe2Rpc3BsYXk6aW5saW5lO30NCgkuc3Qye2ZpbGw6IzE4M0U5ODt9DQoJLnN0M3tmaWxsOiNGRkZGRkY7fQ0KCS5zdDR7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojMTgzRTk4O30NCgkuc3Q1e2ZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO2ZpbGw6I0VGN0QyMjt9DQoJLnN0NntmaWxsOiNGMDc4MjQ7fQ0KCS5zdDd7ZmlsbDojRjA3NzAwO30NCgkuc3Q4e2ZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO2ZpbGw6I0YwNzcwMDt9DQoJLnN0OXtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiMzQjJBOTg7fQ0KCS5zdDEwe2ZpbGw6IzNCMkE5ODt9DQo8L3N0eWxlPg0KPGcgaWQ9IkxheWVyXzEiIGNsYXNzPSJzdDAiPg0KCTxnIGNsYXNzPSJzdDEiPg0KCQk8Zz4NCgkJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik05MjAuMSw0MTAuM2MwLDI5NC43LTI2Myw1NTAuOC0zNTEuNSw2MjguN2MtMTYuNCwxNC40LTQwLjksMTQuNC01Ny4zLDANCgkJCQljLTg4LjUtNzcuOC0zNTEuNS0zMzMuOS0zNTEuNS02MjguN2MwLTIwOS45LDE3MC4yLTM4MC4xLDM4MC4xLTM4MC4xUzkyMC4xLDIwMC40LDkyMC4xLDQxMC4zeiIvPg0KCQkJPGNpcmNsZSBjbGFzcz0ic3QzIiBjeD0iNTM5LjUiIGN5PSI0MTAuMyIgcj0iMjgwLjgiLz4NCgkJPC9nPg0KCQk8Zz4NCgkJCTxnPg0KCQkJCTxwYXRoIGNsYXNzPSJzdDQiIGQ9Ik0zNjguNyw0ODQuOWgtN3YtOS4zQzM2NCw0NzkuMSwzNjYuNCw0ODIuNiwzNjguNyw0ODQuOXoiLz4NCgkJCQk8cGF0aCBjbGFzcz0ic3Q0IiBkPSJNNDg5LDIxOS45bC0xMjcuMyw4Ni4zVjM5NWM1LjgtOS4zLDE0LTE3LjUsMjMuNC0yMi4yYzIuMy0xLjIsNC43LTIuMyw4LjItMy41YzUuOC0yLjMsMTQtMy41LDIxLTMuNQ0KCQkJCQljMzUsMCw2NC4yLDMxLjUsNjQuMiw3MC4xYzAsNS44LTEuMiwxMi44LTIuMywxOC43YzAsMS4yLTEuMiwzLjUtMS4yLDQuN2MtMS4yLDIuMy0yLjMsNC43LTIuMyw3Yy0xLjIsMS4yLTEuMiwzLjUtMi4zLDQuNw0KCQkJCQljLTIuMyw1LjgtNS44LDEwLjUtMTAuNSwxNGgyNjAuNXYtMTgxTDQ4OSwyMTkuOXogTTU3OS4zLDQ1NC42di03OS40bDM4LjUsMTIuOHY2Ni42SDU3OS4zeiBNNjg4LjcsNDU0LjZoLTM5LjR2LTg4LjgNCgkJCQkJbC0xMDEuNi0zMy45djEyMi42aC0zOC45VjI2NC41bDE3OS45LDYwLjVWNDU0LjZ6Ii8+DQoJCQkJPHBvbHlnb24gY2xhc3M9InN0NCIgcG9pbnRzPSIzNjEuNywzMDYuMiAzNjEuNyw0ODQuOSA0OTcuMyw0ODQuOSA0OTAuMywzNDUuNSAJCQkJIi8+DQoJCQk8L2c+DQoJCQk8Zz4NCgkJCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNNzA5LjQsNTQzLjVoNy40bDEuNy0xMC44SDY5MWwtMS43LDEwLjhoNy45bC01LjEsMzMuNmgxMi4xTDcwOS40LDU0My41eiBNNTU5LjksNTMyLjdoLTEyLjJsLTQuMSwyNi44DQoJCQkJCWMtMC44LDguNC03LjcsOC4xLTYuMywxLjNsNC4zLTI4LjFoLTEyLjJsLTQuNSwyOS40Yy0zLjQsMTkuMSwyNi44LDIzLDMwLjQsMC4zTDU1OS45LDUzMi43eiBNNTU1LjYsNTc3LjJoMzAuMmwxLjctMTAuOWgtMTMuNA0KCQkJCQlsMTkuNC0zMy41aC0yOC45bC0xLjUsMTAuMmgxMi4zTDU1NS42LDU3Ny4yeiBNNTg4LjgsNTc3LjJINjAxbDIuMi0xNC43aDIuM2MxMC45LDAsMTguMS03LDE4LjEtMTcuM2MwLTguMy01LTEyLjUtMTQuNi0xMi41DQoJCQkJCWgtMTMuNEw1ODguOCw1NzcuMnogTTYwNC44LDU1Mi4xbDEuNi0xMC4xaDEuMWMzLjEsMCw0LjIsMi4yLDMuOSw1LjJjLTAuMywyLjYtMi4yLDQuOS01LjQsNC45SDYwNC44eiBNNjQ0LjEsNTMxLjkNCgkJCQkJYy0yMi40LDAtMjguNyw0Ni4xLTUuMyw0Ni4xQzY2Myw1NzgsNjY2LjUsNTMxLjksNjQ0LjEsNTMxLjlMNjQ0LjEsNTMxLjl6IE02NDMuMyw1NDIuOWM1LjksMCwzLDI0LjQtMy4zLDI0LjQNCgkJCQkJQzYzMy43LDU2Ny4yLDYzNy40LDU0Mi45LDY0My4zLDU0Mi45TDY0My4zLDU0Mi45eiBNNjU4LjIsNTc0LjdjMy40LDIuMiw3LjIsMy4zLDExLjMsMy4zYzkuOCwwLDE2LjUtNi40LDE2LjUtMTUuNw0KCQkJCQljMC05LjItMTAuMS0xMi45LTEwLTE2LjhjMC4xLTQuNSw3LjMtMywxMC4xLTAuMWwxLjctMTEuMWMtMy40LTEuNy02LjUtMi40LTkuNy0yLjRjLTguNywwLTE1LjEsNi4zLTE1LjEsMTQuNg0KCQkJCQljMCw5LDEwLDEyLjksMTAsMTYuN2MwLDIuMS0xLjgsMy40LTQuNywzLjRjLTIuNywwLTUuNS0xLjMtOC4zLTMuOUw2NTguMiw1NzQuN3oiLz4NCgkJCQk8cGF0aCBjbGFzcz0ic3Q1IiBkPSJNNDAwLjEsNTE5LjFsNDcuMSw0Ny4xbC04LjMsOC4zbC01NS40LTU1LjRINDAwLjF6IE00MjUsNTE5LjFsMzQuNiwzNC42bC04LjMsOC4zbC00Mi45LTQyLjlINDI1eg0KCQkJCQkgTTM3NS4yLDUxOS4xbDU4LjEsNTguMWgtNS43Yy03LjMsMC0xMy41LTIuNi0xOC42LTcuN2wtNTAuNC01MC40SDM3NS4yeiIvPg0KCQkJCTxwYXRoIGNsYXNzPSJzdDQiIGQ9Ik00NDYuOSw1MzIuN2MxMiwwLDI2LjgsMCwzOS40LDBjMTAuNCwwLDE2LjMsNS42LDE4LDcuNGw3LjEsNy4xYy00LDAtOC4xLDAtMTIuMSwwbC0yMi4yLDIyLjINCgkJCQkJYy01LjEsNS4xLTExLjQsNy43LTE4LjYsNy43aC0xNGMxMC0xMCwyMC0yMCwzMC0zMGgtNS44Yy0zLjksMC04LjMtMS4xLTEzLjEtNS44TDQ0Ni45LDUzMi43eiIvPg0KCQkJPC9nPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPGcgaWQ9IkxheWVyXzIiPg0KCTxnPg0KCQk8Zz4NCgkJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik05MjAuMSw0MTAuM2MwLDI5NC43LTI2Myw1NTAuOC0zNTEuNSw2MjguN2MtMTYuNCwxNC40LTQwLjksMTQuNC01Ny4zLDANCgkJCQljLTg4LjUtNzcuOC0zNTEuNS0zMzMuOS0zNTEuNS02MjguN2MwLTIwOS45LDE3MC4yLTM4MC4xLDM4MC4xLTM4MC4xUzkyMC4xLDIwMC40LDkyMC4xLDQxMC4zeiIvPg0KCQkJPGNpcmNsZSBjbGFzcz0ic3QzIiBjeD0iNTQwIiBjeT0iNDEwLjMiIHI9IjI4MC44Ii8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8cGF0aCBjbGFzcz0ic3QzIiBkPSJNNzA2LjYsNDE2LjVjLTg1LjEsMC0xNzAsMC0yNTQuOCwwYzAtOC44LDAtMTcuMSwwLTI2LjFjMi4yLDIuOCw0LjEsNC44LDUuNyw3YzIuNiwzLjQsNi4yLDUuMSwxMC40LDUuMg0KCQkJCWMxOC41LDAuMSwzNywwLjEsNTUuNSwwYzQuMSwwLDcuNy0xLjYsMTAuMy00LjhjMy40LTQuMiw0LjMtOC45LDIuMi0xMy45Yy0yLjMtNS40LTYuOC04LTEyLjMtOC42Yy0xNC4xLTEuNS0yOC40LTIuOS00Mi41LTQuMw0KCQkJCWMtMi42LTAuMy00LjMtMS4xLTUuOS0zLjRjLTguOC0xMy4yLTE3LjctMjYuNC0yNi41LTM5LjVjLTkuOC0xNC42LTIzLjctMTkuNy00MC42LTE3Yy0xNC42LDIuMy0yOC45LDEzLjktMjguMywzMy42DQoJCQkJYzAuOCwyMS44LDAuMiw0My43LDAuMiw2NS41YzAsMiwwLDQuMSwwLDYuNmMtOSwwLTE3LjUsMC0yNS45LDBjMCw1LjcsMCwxMC45LDAsMTYuNGM4LjgsMCwxNy4yLDAsMjUuOSwwYzAsMS45LDAsMy41LDAsNS4xDQoJCQkJYzAsNDMuOCwwLDg3LjYsMCwxMzEuNGMwLDkuNCw2LDE2LjEsMTQuNiwxNi40YzguMywwLjMsMTQuOC02LDE1LjctMTVjMC43LTcuNSwxLjYtMTQuOCwyLjQtMjIuM2MyLTE4LjEsMy45LTM2LjEsNS45LTU0LjINCgkJCQljMC42LTUuNCwxLjItMTAuOCwxLjktMTYuMWMzLjgsMTAuMSw4LjMsMTkuNyw5LjMsMzAuNmMxLjksMjEuMiw0LjUsNDIuNSw3LDYzLjdjMC44LDYuMyw0LjQsMTAuOCwxMC43LDEyLjYNCgkJCQljMTAuMiwzLDE5LjItNC40LDE5LjItMTUuOWMwLjEtMjUsMC4xLTQ5LjksMC03NC45YzAtMi4xLTAuNS00LjMtMS02LjRjLTQuMS0xNS44LTguMi0zMS42LTEyLjMtNDcuM2MtMC42LTIuNS0xLjItNS0xLjktOA0KCQkJCWM4NS40LDAsMTcwLjMsMCwyNTUuMiwwQzcwNi42LDQyNy4yLDcwNi42LDQyMi4xLDcwNi42LDQxNi41eiBNNDUyLjksMjcwLjRjMC4xLTE3LjQtMTQuMi0zMS44LTMxLjUtMzEuOQ0KCQkJCWMtMTcuNC0wLjEtMzEuNywxNC4xLTMxLjgsMzEuNWMtMC4xLDE3LjYsMTQuMSwzMS45LDMxLjcsMzEuOEM0MzguNSwzMDEuOCw0NTIuOCwyODcuNSw0NTIuOSwyNzAuNHoiLz4NCgkJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik03MDYuNiw0MTYuNWMwLDUuNiwwLDEwLjcsMCwxNi4zYy04NC45LDAtMTY5LjcsMC0yNTUuMiwwYzAuNywzLDEuMiw1LjUsMS45LDhjNC4xLDE1LjgsOC4yLDMxLjUsMTIuMyw0Ny4zDQoJCQkJYzAuNiwyLjEsMSw0LjMsMSw2LjRjMC4xLDI1LDAuMSw0OS45LDAsNzQuOWMtMC4xLDExLjUtOSwxOC45LTE5LjIsMTUuOWMtNi4zLTEuOC05LjktNi4zLTEwLjctMTIuNmMtMi41LTIxLjItNS00Mi40LTctNjMuNw0KCQkJCWMtMS0xMC45LTUuNS0yMC41LTkuMy0zMC42Yy0wLjYsNS40LTEuMywxMC44LTEuOSwxNi4xYy0yLDE4LjEtMy45LDM2LjEtNS45LDU0LjJjLTAuOCw3LjQtMS43LDE0LjgtMi40LDIyLjMNCgkJCQljLTAuOSw5LjEtNy4zLDE1LjQtMTUuNywxNWMtOC42LTAuMy0xNC42LTctMTQuNi0xNi40YzAtNDMuOCwwLTg3LjYsMC0xMzEuNGMwLTEuNiwwLTMuMiwwLTUuMWMtOC43LDAtMTcuMiwwLTI1LjksMA0KCQkJCWMwLTUuNSwwLTEwLjgsMC0xNi40YzguNCwwLDE2LjksMCwyNS45LDBjMC0yLjUsMC00LjYsMC02LjZjMC0yMS45LDAuNi00My43LTAuMi02NS41Yy0wLjctMTkuNiwxMy43LTMxLjMsMjguMy0zMy42DQoJCQkJYzE2LjktMi43LDMwLjgsMi4zLDQwLjYsMTdjOC44LDEzLjIsMTcuOCwyNi4zLDI2LjUsMzkuNWMxLjUsMi4zLDMuMywzLjIsNS45LDMuNGMxNC4yLDEuNCwyOC40LDIuOCw0Mi41LDQuMw0KCQkJCWM1LjcsMC42LDEwLjEsMy4yLDEyLjMsOC42YzIuMSw1LDEuMiw5LjctMi4yLDEzLjljLTIuNiwzLjItNi4yLDQuOC0xMC4zLDQuOGMtMTguNSwwLjEtMzcsMC4xLTU1LjUsMGMtNC4yLDAtNy44LTEuNy0xMC40LTUuMg0KCQkJCWMtMS43LTIuMi0zLjQtNC4zLTUuNy03YzAsOSwwLDE3LjQsMCwyNi4xQzUzNi42LDQxNi41LDYyMS41LDQxNi41LDcwNi42LDQxNi41eiIvPg0KCQkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTQ1Mi45LDI3MC40Yy0wLjEsMTcuMS0xNC40LDMxLjQtMzEuNSwzMS41Yy0xNy42LDAtMzEuOC0xNC4yLTMxLjctMzEuOGMwLjEtMTcuMywxNC40LTMxLjUsMzEuOC0zMS41DQoJCQkJQzQzOC43LDIzOC42LDQ1Mi45LDI1Myw0NTIuOSwyNzAuNHoiLz4NCgkJCTxwYXRoIGNsYXNzPSJzdDMiIGQ9Ik02MzUuMiw0ODEuMWMtMTEuMywwLTIyLjEsMC0zMy4yLDBjMC00LjItMC4yLTguMiwwLjEtMTIuMWMwLjEtMS4xLDEuOS0yLjgsMy0yLjhjOS0wLjIsMTcuOS0wLjIsMjYuOSwwDQoJCQkJYzEuMSwwLDMsMS43LDMsMi44QzYzNS40LDQ3Mi45LDYzNS4yLDQ3Ni45LDYzNS4yLDQ4MS4xeiIvPg0KCQkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTYzMC4zLDIzNC44YzIuOCwwLjgsNS42LDEuNCw4LjMsMi40YzE3LjIsNi42LDI2LjUsMjUuNCwyMS40LDQzLjNjLTUsMTcuNS0yMy4zLDI4LjYtNDEuMSwyNC45DQoJCQkJYy0xOC4xLTMuNy0zMC41LTIwLjQtMjguNS0zOC43YzEuNy0xNS43LDEyLjgtMjgsMjguMy0zMS4zYzAuOC0wLjEsMS42LTAuNSwyLjMtMC44QzYyNC4xLDIzNC44LDYyNy4yLDIzNC44LDYzMC4zLDIzNC44eiIvPg0KCQkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTY3OS42LDQxMS45Yy0xLjItMTkuNC0yLjUtMzguNi0xMC43LTU2LjZjMCwxOC44LDAsMzcuNSwwLDU2LjZjLTI4LjgsMC01Ny4xLDAtODUuOSwwDQoJCQkJYzAtMTguNywwLTM3LjQsMC01Ni4yYy0wLjMtMC4xLTAuNy0wLjEtMS0wLjFjLTcuNiwxNy45LTguOCwzNy4yLTEwLDU2LjRjLTguNiwwLTE2LjcsMC0yNS40LDBjMC40LTYuNSwwLjctMTIuOCwxLjItMTkuMg0KCQkJCWMxLjQtMTUsMy45LTI5LjksOS40LTQ0YzQuOS0xMi41LDExLjctMjMuNSwyNC4xLTMwLjFjNi42LTMuNSwxMy42LTMuOSwyMC44LTMuNGMwLjksMC4xLDEuOSwxLjIsMi41LDIuMg0KCQkJCWM0LjQsNy4yLDguNywxNC40LDEzLjUsMjIuNGMxLjctNSwzLTguMyw0LjEtMTIuNmMwLjMtMS4xLTAuNS0zLjctMS4xLTQuOWMtMS4xLTIuMi0yLjMtNC40LTMuNy02LjljNS43LDAsMTEsMCwxNiwwDQoJCQkJYy0xLjQsMy45LTMuOSw3LjktMy45LDExLjhjMCw0LDIuMyw3LjksMy45LDEyLjdjMy43LTYuMiw3LjItMTEuOSwxMC42LTE3LjdjNC4zLTcuMyw0LjMtNy4zLDEyLjktNi45DQoJCQkJYzExLjIsMC42LDE5LjgsNi4zLDI2LjYsMTQuOGM2LjUsOCwxMC40LDE3LjIsMTMuNCwyN2M1LjQsMTcuOCw3LDM2LjIsNy44LDU0LjhDNjk2LjUsNDExLjksNjg4LjMsNDExLjksNjc5LjYsNDExLjl6DQoJCQkJIE02MzIuOCwzNjMuM2M4LjMsMCwxNi4yLDAsMjQsMGMwLTIuNiwwLTUsMC03LjVjLTguMSwwLTE2LDAtMjQsMEM2MzIuOCwzNTguNSw2MzIuOCwzNjAuOCw2MzIuOCwzNjMuM3oiLz4NCgkJCTxwYXRoIGNsYXNzPSJzdDMiIGQ9Ik01OTUuOCw0MTQuM3YtNDloLTc1LjR2NDlINTk1Ljh6Ii8+DQoJCQk8cGF0aCBjbGFzcz0ic3Q2IiBkPSJNNTkyLjYsMzY4LjFoLTY5LjF2NDMuNWg2OS4xVjM2OC4xeiIvPg0KCQkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTcwNi42LDQ0MC44SDQ4MS4xVjU4NmgyMjUuNVY0NDAuOHoiLz4NCgkJPC9nPg0KCTwvZz4NCjwvZz4NCjxnIGlkPSJMYXllcl8yX2NvcHkiIGNsYXNzPSJzdDAiPg0KCTxnIGNsYXNzPSJzdDEiPg0KCQk8cGF0aCBjbGFzcz0ic3Q3IiBkPSJNOTIwLjEsNDEwLjNjMCwyOTQuNy0yNjMsNTUwLjgtMzUxLjUsNjI4LjdjLTE2LjQsMTQuNC00MC45LDE0LjQtNTcuMywwYy04OC41LTc3LjgtMzUxLjUtMzMzLjktMzUxLjUtNjI4LjcNCgkJCWMwLTIwOS45LDE3MC4yLTM4MC4xLDM4MC4xLTM4MC4xUzkyMC4xLDIwMC40LDkyMC4xLDQxMC4zeiIvPg0KCQk8Y2lyY2xlIGNsYXNzPSJzdDMiIGN4PSI1NDAiIGN5PSI0MTAuMyIgcj0iMjgwLjgiLz4NCgk8L2c+DQoJPGcgY2xhc3M9InN0MSI+DQoJCTxwYXRoIGNsYXNzPSJzdDgiIGQ9Ik0zNjEuMyw0NDIuMmw3LjcsOWwyLjQtOUgzNjEuM3ogTTM1MC4yLDQyOS4ybDYuOCw4aDE1LjdsMi4xLThIMzUwLjJ6IE0zMzkuMSw0MTYuMWw2LjksOC4xaDMwLjJsMi4yLTguMQ0KCQkJSDMzOS4xeiBNMzI3LjksNDAyLjlsNi45LDguMmg0NC45bDIuMi04LjJIMzI3Ljl6IE0zMTYuNywzODkuOGw2LjksOC4yaDU5LjZsMi4yLTguMkgzMTYuN3ogTTMwNi4yLDM3Ni42bC0wLjMsMC42bDYuNSw3LjZoNzQuMw0KCQkJbDIuMi04LjFMMzA2LjIsMzc2LjZ6Ii8+DQoJCTxwYXRoIGNsYXNzPSJzdDgiIGQ9Ik01NzAuNSw0MDIuOWwtMi40LDguMmgxOTUuNmwyLjQtOC4ySDU3MC41eiBNNTc0LjQsMzg5LjhsLTIuNCw4LjJoMTk1LjdsMS40LTQuOWMwLjMtMS4xLDAuNi0yLjIsMS0zLjMNCgkJCUg1NzQuNHogTTU3OC4zLDM3Ni42bC0yLjQsOC4xaDE5NS43bDIuNC04LjFINTc4LjN6Ii8+DQoJCTxwYXRoIGNsYXNzPSJzdDkiIGQ9Ik0zODAuNiw0NTAuNWgzNy42bDUtMTguOWgtMTcuNGwyLjQtOC44aDE3LjNsNC45LTE4LjRoLTE3LjNsMi40LTguOWgxNy4zbDUtMTguOWgtMzcuNWwtMi40LDloMzRMNDMxLDM4OQ0KCQkJaC0zNGwtMi42LDkuOGgxNy4ybC0wLjksMy4zaC0xNy4ybC0yLjYsOS45aDM0bC0wLjksMy40aC0zNGwtMi42LDkuN2gxNy4ybC0wLjksMy40aC0xNy4ybC0yLjYsOS43aDM0bC0wLjksMy40aC0zNEwzODAuNiw0NTAuNXoNCgkJCSBNNDI3LjMsNDUwLjVoMTkuNGwxMS00Mi42bC0wLjEsNGgyMi43bC0xLjcsMy40aC0yMS4xbC0wLjQsOS43aDE2LjVsLTEuNywzLjRINDU3bC0wLjQsOS43SDQ2N2wtMS43LDMuNGgtOC44bC0wLjMsOWg4DQoJCQlsMjEuNS00Mi42bC0xLjEsNGgxNS41bC0wLjksMy40aC0xNS41bC0yLjYsOS43aDE1LjNsLTAuOSwzLjRoLTE1LjNsLTIuNiw5LjdoMTUuNGwtMC45LDMuNGgtMTUuNWwtMi40LDloMTguNWwxOS42LTczLjloLTI0LjENCgkJCWwtNC44LDlsMjMuMywwTDUwNiwzODlsLTI0LjMsMGwtNS4zLDkuOGwyNy4xLDAuMWwtMC45LDMuM2wtMjgtMC4xbC0zLDUuNWwwLjItMzFINDQ3bC0yLjQsOWgyNC4ybDAsMy40aC0yNWwtMi42LDkuOGgyNy42bDAsMy4zDQoJCQloLTI4LjRsLTIuNiw5LjloMTUuOWwtMC45LDMuNGgtMTUuOWwtMi42LDkuN0g0NTBsLTAuOSwzLjRoLTE1LjlsLTIuNiw5LjdoMTUuOWwtMC45LDMuNGgtMTUuOUw0MjcuMyw0NTAuNXogTTUxNC4xLDQ1MC41SDUzNg0KCQkJbDEzLjItOWw3LjUtMjguMmwtMTAuMS04LjhoLTEzLjdsMi44LTEwaDYuNWwtMSw0LjJoMy4zbDAsMGgxNS40bDMuNS0xMy4xbC0xMC40LTloLTIxLjFsLTEzLjIsOWg0MS41bC0wLjksMy40aC00MS41bC0yLjYsOS44DQoJCQlINTMxbC0wLjksMy4zaC0xNS45bC0yLjYsOS45aDQyLjFsLTAuOSwzLjRoLTQxLjFsNy40LDYuNGwxNi0wLjFsLTAuOSwzLjRoMTYuMWwtMC45LDMuNGgtMTYuMmwtMS4xLDQuMWgtNy40bDEuMS00bC0xOC44LDANCgkJCWwtMi42LDkuN0g1NDdsLTAuOSwzLjRoLTQyTDUxNC4xLDQ1MC41eiIvPg0KCQk8cGF0aCBjbGFzcz0ic3QxMCIgZD0iTTU4My43LDQxOS42bC03LjMsMjIuOGMtMC44LDIuMy0xLjcsNC4yLTIuNyw1LjZjLTEsMS40LTIuMiwyLjUtMy43LDMuMWMtMS41LDAuNy0zLjIsMS01LjQsMQ0KCQkJYy0yLjYsMC00LjMtMC41LTUuMi0xLjZzLTEuMy0yLjQtMS4xLTMuOGMwLjEtMS40LDAuNS0zLjEsMS4xLTVsNy4xLTIyLjFoNi44bC03LjQsMjNjLTAuNCwxLjEtMC42LDEuOS0wLjcsMi41DQoJCQljLTAuMSwwLjYtMC4xLDEuMSwwLDEuNGMwLjEsMC40LDAuNSwwLjUsMSwwLjVjMC42LDAsMS4xLTAuMiwxLjQtMC41YzAuNC0wLjQsMC43LTAuOCwwLjktMS40YzAuMi0wLjYsMC42LTEuNCwwLjktMi41bDcuNC0yMw0KCQkJSDU4My43eiBNNTg5LjksNDUxLjVoLTE0LjZsMS44LTUuNWwxNC42LTIxLjZINTg0bDEuNi00LjhoMTQuN2wtMS41LDQuN2wtMTUuMiwyMi40aDcuOEw1ODkuOSw0NTEuNXogTTU5Mi4xLDQ1MS41bDEwLjItMzEuOWg2LjkNCgkJCWMyLjQsMCw0LjMsMC4xLDUuNiwwLjRjMS4zLDAuMiwyLjIsMC45LDIuNywyLjFjMC41LDEuMSwwLjQsMi45LTAuNCw1LjNjLTEuNCw0LjQtMy44LDYuOC03LjEsNy4xbC0wLjEsMC4zYzEuNCwwLDIuMywwLjMsMi44LDENCgkJCWMwLjUsMC43LDAuNywxLjUsMC42LDIuNmMtMC4xLDEuMS0wLjQsMi40LTEsNGMtMC43LDIuMi0xLjQsMy45LTIuMiw1LjFjLTAuOCwxLjItMS43LDIuMS0yLjcsMi43Yy0xLDAuNi0yLjEsMC45LTMuMywxLjENCgkJCWMtMS4yLDAuMS0yLjksMC4yLTUsMC4ySDU5Mi4xeiBNNjAzLjUsNDM3LjJsLTMuMSw5LjhjMS4xLDAsMi0wLjIsMi43LTAuN2MwLjctMC41LDEuMi0xLDEuNS0xLjdjMC4zLTAuNywwLjctMS42LDEuMS0yLjgNCgkJCWMwLjQtMS40LDAuNy0yLjQsMC43LTNjMC0wLjYtMC4yLTEuMS0wLjYtMS4yQzYwNS4yLDQzNy4yLDYwNC41LDQzNy4yLDYwMy41LDQzNy4yTDYwMy41LDQzNy4yeiBNNjA3LjcsNDI0LjJsLTIuNyw4LjQNCgkJCWMxLjEtMC4xLDEuOC0wLjEsMi4zLTAuMmMwLjQtMC4xLDAuOC0wLjQsMS4zLTFjMC41LTAuNiwwLjktMS42LDEuNC0yLjljMC40LTEuMSwwLjYtMS45LDAuNi0yLjVjMC0wLjYtMC4yLTEtMC42LTEuMw0KCQkJQzYwOS41LDQyNC4zLDYwOC44LDQyNC4yLDYwNy43LDQyNC4yTDYwNy43LDQyNC4yeiBNNjI1LjYsNDUxLjVoLTE0LjFsMTAuMi0zMS45aDE0LjFsLTEuNiw0LjhINjI3bC0yLjIsN2g3bC0xLjYsNC44aC03DQoJCQlsLTMuMywxMC40aDcuM0w2MjUuNiw0NTEuNXogTTYzNC40LDQ1MS41aC02LjhsMTAuMi0zMS45aDYuOGwtNC43LDE0LjVoMC4xbDktMTQuNWg2LjVsLTkuMSwxNGwtMS4xLDE3LjhoLTYuN2wxLjEtMTYuMmgtMC4xDQoJCQlMNjM0LjQsNDUxLjV6IE02NTQsNDUxLjVoLTYuOGwxMC4yLTMxLjloNi44TDY1NCw0NTEuNXogTTY4MC4zLDQzMC41aC02LjhsMS4zLTMuOWMwLjUtMS43LDAuMi0yLjUtMS0yLjVjLTAuNywwLTEuMiwwLjItMS42LDAuNg0KCQkJYy0wLjQsMC40LTAuNywxLTEsMS45Yy0wLjQsMS4yLTAuNCwyLjEsMC4xLDIuOGMwLjQsMC43LDEuMywxLjksMi43LDMuNmMxLjQsMS43LDIuMywzLjMsMi43LDQuOGMwLjQsMS41LDAuMywzLjQtMC40LDUuNg0KCQkJYy0xLDMtMi40LDUuMi00LjMsNi42Yy0xLjksMS40LTQuMywyLjItNy4yLDIuMmMtMi41LDAtNC4zLTAuNi01LjYtMS43Yy0xLjMtMS4xLTEuNS0yLjktMC43LTUuNWwxLjctNS4yaDYuOGwtMS41LDQuOA0KCQkJYy0wLjMsMC45LTAuNCwxLjYtMC4yLDEuOWMwLjIsMC40LDAuNiwwLjUsMS4yLDAuNWMxLjIsMCwyLjEtMC44LDIuNi0yLjRjMC41LTEuNiwwLjUtMi45LDAuMS0zLjhjLTAuNS0xLTEuNC0yLjItMi43LTMuNw0KCQkJYy0xLjMtMS41LTIuMi0zLTIuNi00LjVjLTAuNC0xLjUtMC4zLTMuNCwwLjUtNS43YzEuNy01LjMsNS41LTgsMTEuMy04YzIuNiwwLDQuNCwwLjYsNS42LDEuN2MxLjIsMS4xLDEuNCwyLjksMC42LDUuNA0KCQkJTDY4MC4zLDQzMC41eiBNNjg4LjYsNDI0LjVoLTQuOGwxLjYtNC44aDE2LjNsLTEuNiw0LjhoLTQuOGwtOC43LDI3aC02LjhMNjg4LjYsNDI0LjV6IE03MDcuNyw0MTkuNmg5LjRsLTYuNSwzMS45aC02LjhsMS43LTcuOA0KCQkJaC0zLjdsLTMuNiw3LjhoLTUuN0w3MDcuNyw0MTkuNnogTTcwNC4yLDQzOC45aDIuNWwzLjUtMTMuOWwtMC4yLTAuMUw3MDQuMiw0MzguOXogTTcxMi4xLDQ1MS41bDEwLjItMzEuOWg5LjRsLTMuMSwyMy4yaDAuMQ0KCQkJbDcuNC0yMy4yaDUuM2wtMTAuMiwzMS45aC04LjdsMy41LTI2LjdINzI2bC04LjYsMjYuN0g3MTIuMXoiLz4NCgk8L2c+DQo8L2c+DQo8L3N2Zz4NCg=="
                        : "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyOC4yLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDEwODAgMTA4MCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTA4MCAxMDgwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojMTgzRTk4O30NCgkuc3Qxe2ZpbGw6I0ZGRkZGRjt9DQoJLnN0MntmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiMxODNFOTg7fQ0KCS5zdDN7ZGlzcGxheTpub25lO30NCgkuc3Q0e2Rpc3BsYXk6aW5saW5lO30NCgkuc3Q1e2ZpbGw6I0YwNzgyNDt9DQoJLnN0NntmaWxsOiNGMDc3MDA7fQ0KCS5zdDd7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRjA3NzAwO30NCgkuc3Q4e2ZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO2ZpbGw6IzNCMkE5ODt9DQo8L3N0eWxlPg0KPGcgaWQ9IkxheWVyXzEiPg0KCTxnPg0KCQk8Zz4NCgkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik05MjAuMSw0MTAuM2MwLDI5NC43LTI2Myw1NTAuOC0zNTEuNSw2MjguN2MtMTYuNCwxNC40LTQwLjksMTQuNC01Ny4zLDANCgkJCQljLTg4LjUtNzcuOC0zNTEuNS0zMzMuOS0zNTEuNS02MjguN2MwLTIwOS45LDE3MC4yLTM4MC4xLDM4MC4xLTM4MC4xUzkyMC4xLDIwMC40LDkyMC4xLDQxMC4zeiIvPg0KCQkJPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iNTM5LjUiIGN5PSI0MTAuMyIgcj0iMjgwLjgiLz4NCgkJPC9nPg0KCQk8Zz4NCgkJCTxnPg0KCQkJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0zNjEuNCw1MjYuMWgtNy42di0xMC4yQzM1Ni4zLDUxOS43LDM1OC44LDUyMy41LDM2MS40LDUyNi4xeiIvPg0KCQkJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik00OTIuNiwyMzdsLTEzOC45LDk0LjJWNDI4YzYuNC0xMC4yLDE1LjMtMTkuMSwyNS41LTI0LjJjMi41LTEuMyw1LjEtMi41LDguOS0zLjgNCgkJCQkJYzYuNC0yLjUsMTUuMy0zLjgsMjIuOS0zLjhjMzguMiwwLDcwLjEsMzQuNCw3MC4xLDc2LjRjMCw2LjQtMS4zLDE0LTIuNSwyMC40YzAsMS4zLTEuMywzLjgtMS4zLDUuMWMtMS4zLDIuNS0yLjUsNS4xLTIuNSw3LjYNCgkJCQkJYy0xLjMsMS4zLTEuMywzLjgtMi41LDUuMWMtMi41LDYuNC02LjQsMTEuNS0xMS41LDE1LjNoMjg0LjFWMzI4LjZMNDkyLjYsMjM3eiBNNTkxLjEsNDkzdi04Ni42bDQyLDE0VjQ5M0g1OTEuMXogTTcxMC41LDQ5Mw0KCQkJCQloLTQzdi05Ni44bC0xMTAuOC0zNi45VjQ5M2gtNDIuNFYyODUuNmwxOTYuMiw2NlY0OTN6Ii8+DQoJCQkJPHBvbHlnb24gY2xhc3M9InN0MiIgcG9pbnRzPSIzNTMuNywzMzEuMiAzNTMuNyw1MjYuMSA1MDEuNiw1MjYuMSA0OTQsMzc0IAkJCQkiLz4NCgkJCTwvZz4NCgkJPC9nPg0KCTwvZz4NCjwvZz4NCjxnIGlkPSJMYXllcl8yIiBjbGFzcz0ic3QzIj4NCgk8ZyBjbGFzcz0ic3Q0Ij4NCgkJPGc+DQoJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNOTIwLjEsNDEwLjNjMCwyOTQuNy0yNjMsNTUwLjgtMzUxLjUsNjI4LjdjLTE2LjQsMTQuNC00MC45LDE0LjQtNTcuMywwDQoJCQkJYy04OC41LTc3LjgtMzUxLjUtMzMzLjktMzUxLjUtNjI4LjdjMC0yMDkuOSwxNzAuMi0zODAuMSwzODAuMS0zODAuMVM5MjAuMSwyMDAuNCw5MjAuMSw0MTAuM3oiLz4NCgkJCTxjaXJjbGUgY2xhc3M9InN0MSIgY3g9IjU0MCIgY3k9IjQxMC4zIiByPSIyODAuOCIvPg0KCQk8L2c+DQoJCTxnPg0KCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTcwNi42LDQxNi41Yy04NS4xLDAtMTcwLDAtMjU0LjgsMGMwLTguOCwwLTE3LjEsMC0yNi4xYzIuMiwyLjgsNC4xLDQuOCw1LjcsN2MyLjYsMy40LDYuMiw1LjEsMTAuNCw1LjINCgkJCQljMTguNSwwLjEsMzcsMC4xLDU1LjUsMGM0LjEsMCw3LjctMS42LDEwLjMtNC44YzMuNC00LjIsNC4zLTguOSwyLjItMTMuOWMtMi4zLTUuNC02LjgtOC0xMi4zLTguNmMtMTQuMS0xLjUtMjguNC0yLjktNDIuNS00LjMNCgkJCQljLTIuNi0wLjMtNC4zLTEuMS01LjktMy40Yy04LjgtMTMuMi0xNy43LTI2LjQtMjYuNS0zOS41Yy05LjgtMTQuNi0yMy43LTE5LjctNDAuNi0xN2MtMTQuNiwyLjMtMjguOSwxMy45LTI4LjMsMzMuNg0KCQkJCWMwLjgsMjEuOCwwLjIsNDMuNywwLjIsNjUuNWMwLDIsMCw0LjEsMCw2LjZjLTksMC0xNy41LDAtMjUuOSwwYzAsNS43LDAsMTAuOSwwLDE2LjRjOC44LDAsMTcuMiwwLDI1LjksMGMwLDEuOSwwLDMuNSwwLDUuMQ0KCQkJCWMwLDQzLjgsMCw4Ny42LDAsMTMxLjRjMCw5LjQsNiwxNi4xLDE0LjYsMTYuNGM4LjMsMC4zLDE0LjgtNiwxNS43LTE1YzAuNy03LjUsMS42LTE0LjgsMi40LTIyLjNjMi0xOC4xLDMuOS0zNi4xLDUuOS01NC4yDQoJCQkJYzAuNi01LjQsMS4yLTEwLjgsMS45LTE2LjFjMy44LDEwLjEsOC4zLDE5LjcsOS4zLDMwLjZjMS45LDIxLjIsNC41LDQyLjUsNyw2My43YzAuOCw2LjMsNC40LDEwLjgsMTAuNywxMi42DQoJCQkJYzEwLjIsMywxOS4yLTQuNCwxOS4yLTE1LjljMC4xLTI1LDAuMS00OS45LDAtNzQuOWMwLTIuMS0wLjUtNC4zLTEtNi40Yy00LjEtMTUuOC04LjItMzEuNi0xMi4zLTQ3LjNjLTAuNi0yLjUtMS4yLTUtMS45LTgNCgkJCQljODUuNCwwLDE3MC4zLDAsMjU1LjIsMEM3MDYuNiw0MjcuMiw3MDYuNiw0MjIuMSw3MDYuNiw0MTYuNXogTTQ1Mi45LDI3MC40YzAuMS0xNy40LTE0LjItMzEuOC0zMS41LTMxLjkNCgkJCQljLTE3LjQtMC4xLTMxLjcsMTQuMS0zMS44LDMxLjVjLTAuMSwxNy42LDE0LjEsMzEuOSwzMS43LDMxLjhDNDM4LjUsMzAxLjgsNDUyLjgsMjg3LjUsNDUyLjksMjcwLjR6Ii8+DQoJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNzA2LjYsNDE2LjVjMCw1LjYsMCwxMC43LDAsMTYuM2MtODQuOSwwLTE2OS43LDAtMjU1LjIsMGMwLjcsMywxLjIsNS41LDEuOSw4YzQuMSwxNS44LDguMiwzMS41LDEyLjMsNDcuMw0KCQkJCWMwLjYsMi4xLDEsNC4zLDEsNi40YzAuMSwyNSwwLjEsNDkuOSwwLDc0LjljLTAuMSwxMS41LTksMTguOS0xOS4yLDE1LjljLTYuMy0xLjgtOS45LTYuMy0xMC43LTEyLjZjLTIuNS0yMS4yLTUtNDIuNC03LTYzLjcNCgkJCQljLTEtMTAuOS01LjUtMjAuNS05LjMtMzAuNmMtMC42LDUuNC0xLjMsMTAuOC0xLjksMTYuMWMtMiwxOC4xLTMuOSwzNi4xLTUuOSw1NC4yYy0wLjgsNy40LTEuNywxNC44LTIuNCwyMi4zDQoJCQkJYy0wLjksOS4xLTcuMywxNS40LTE1LjcsMTVjLTguNi0wLjMtMTQuNi03LTE0LjYtMTYuNGMwLTQzLjgsMC04Ny42LDAtMTMxLjRjMC0xLjYsMC0zLjIsMC01LjFjLTguNywwLTE3LjIsMC0yNS45LDANCgkJCQljMC01LjUsMC0xMC44LDAtMTYuNGM4LjQsMCwxNi45LDAsMjUuOSwwYzAtMi41LDAtNC42LDAtNi42YzAtMjEuOSwwLjYtNDMuNy0wLjItNjUuNWMtMC43LTE5LjYsMTMuNy0zMS4zLDI4LjMtMzMuNg0KCQkJCWMxNi45LTIuNywzMC44LDIuMyw0MC42LDE3YzguOCwxMy4yLDE3LjgsMjYuMywyNi41LDM5LjVjMS41LDIuMywzLjMsMy4yLDUuOSwzLjRjMTQuMiwxLjQsMjguNCwyLjgsNDIuNSw0LjMNCgkJCQljNS43LDAuNiwxMC4xLDMuMiwxMi4zLDguNmMyLjEsNSwxLjIsOS43LTIuMiwxMy45Yy0yLjYsMy4yLTYuMiw0LjgtMTAuMyw0LjhjLTE4LjUsMC4xLTM3LDAuMS01NS41LDBjLTQuMiwwLTcuOC0xLjctMTAuNC01LjINCgkJCQljLTEuNy0yLjItMy40LTQuMy01LjctN2MwLDksMCwxNy40LDAsMjYuMUM1MzYuNiw0MTYuNSw2MjEuNSw0MTYuNSw3MDYuNiw0MTYuNXoiLz4NCgkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00NTIuOSwyNzAuNGMtMC4xLDE3LjEtMTQuNCwzMS40LTMxLjUsMzEuNWMtMTcuNiwwLTMxLjgtMTQuMi0zMS43LTMxLjhjMC4xLTE3LjMsMTQuNC0zMS41LDMxLjgtMzEuNQ0KCQkJCUM0MzguNywyMzguNiw0NTIuOSwyNTMsNDUyLjksMjcwLjR6Ii8+DQoJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNjM1LjIsNDgxLjFjLTExLjMsMC0yMi4xLDAtMzMuMiwwYzAtNC4yLTAuMi04LjIsMC4xLTEyLjFjMC4xLTEuMSwxLjktMi44LDMtMi44YzktMC4yLDE3LjktMC4yLDI2LjksMA0KCQkJCWMxLjEsMCwzLDEuNywzLDIuOEM2MzUuNCw0NzIuOSw2MzUuMiw0NzYuOSw2MzUuMiw0ODEuMXoiLz4NCgkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik02MzAuMywyMzQuOGMyLjgsMC44LDUuNiwxLjQsOC4zLDIuNGMxNy4yLDYuNiwyNi41LDI1LjQsMjEuNCw0My4zYy01LDE3LjUtMjMuMywyOC42LTQxLjEsMjQuOQ0KCQkJCWMtMTguMS0zLjctMzAuNS0yMC40LTI4LjUtMzguN2MxLjctMTUuNywxMi44LTI4LDI4LjMtMzEuM2MwLjgtMC4xLDEuNi0wLjUsMi4zLTAuOEM2MjQuMSwyMzQuOCw2MjcuMiwyMzQuOCw2MzAuMywyMzQuOHoiLz4NCgkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik02NzkuNiw0MTEuOWMtMS4yLTE5LjQtMi41LTM4LjYtMTAuNy01Ni42YzAsMTguOCwwLDM3LjUsMCw1Ni42Yy0yOC44LDAtNTcuMSwwLTg1LjksMA0KCQkJCWMwLTE4LjcsMC0zNy40LDAtNTYuMmMtMC4zLTAuMS0wLjctMC4xLTEtMC4xYy03LjYsMTcuOS04LjgsMzcuMi0xMCw1Ni40Yy04LjYsMC0xNi43LDAtMjUuNCwwYzAuNC02LjUsMC43LTEyLjgsMS4yLTE5LjINCgkJCQljMS40LTE1LDMuOS0yOS45LDkuNC00NGM0LjktMTIuNSwxMS43LTIzLjUsMjQuMS0zMC4xYzYuNi0zLjUsMTMuNi0zLjksMjAuOC0zLjRjMC45LDAuMSwxLjksMS4yLDIuNSwyLjINCgkJCQljNC40LDcuMiw4LjcsMTQuNCwxMy41LDIyLjRjMS43LTUsMy04LjMsNC4xLTEyLjZjMC4zLTEuMS0wLjUtMy43LTEuMS00LjljLTEuMS0yLjItMi4zLTQuNC0zLjctNi45YzUuNywwLDExLDAsMTYsMA0KCQkJCWMtMS40LDMuOS0zLjksNy45LTMuOSwxMS44YzAsNCwyLjMsNy45LDMuOSwxMi43YzMuNy02LjIsNy4yLTExLjksMTAuNi0xNy43YzQuMy03LjMsNC4zLTcuMywxMi45LTYuOQ0KCQkJCWMxMS4yLDAuNiwxOS44LDYuMywyNi42LDE0LjhjNi41LDgsMTAuNCwxNy4yLDEzLjQsMjdjNS40LDE3LjgsNywzNi4yLDcuOCw1NC44QzY5Ni41LDQxMS45LDY4OC4zLDQxMS45LDY3OS42LDQxMS45eg0KCQkJCSBNNjMyLjgsMzYzLjNjOC4zLDAsMTYuMiwwLDI0LDBjMC0yLjYsMC01LDAtNy41Yy04LjEsMC0xNiwwLTI0LDBDNjMyLjgsMzU4LjUsNjMyLjgsMzYwLjgsNjMyLjgsMzYzLjN6Ii8+DQoJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNTk1LjgsNDE0LjN2LTQ5aC03NS40djQ5SDU5NS44eiIvPg0KCQkJPHBhdGggY2xhc3M9InN0NSIgZD0iTTU5Mi42LDM2OC4xaC02OS4xdjQzLjVoNjkuMVYzNjguMXoiLz4NCgkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03MDYuNiw0NDAuOEg0ODEuMVY1ODZoMjI1LjVWNDQwLjh6Ii8+DQoJCTwvZz4NCgk8L2c+DQo8L2c+DQo8ZyBpZD0iTGF5ZXJfMl9jb3B5IiBjbGFzcz0ic3QzIj4NCgk8ZyBjbGFzcz0ic3Q0Ij4NCgkJPHBhdGggY2xhc3M9InN0NiIgZD0iTTkyMC4xLDQxMC4zYzAsMjk0LjctMjYzLDU1MC44LTM1MS41LDYyOC43Yy0xNi40LDE0LjQtNDAuOSwxNC40LTU3LjMsMGMtODguNS03Ny44LTM1MS41LTMzMy45LTM1MS41LTYyOC43DQoJCQljMC0yMDkuOSwxNzAuMi0zODAuMSwzODAuMS0zODAuMVM5MjAuMSwyMDAuNCw5MjAuMSw0MTAuM3oiLz4NCgkJPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iNTQwIiBjeT0iNDEwLjMiIHI9IjI4MC44Ii8+DQoJPC9nPg0KCTxnIGNsYXNzPSJzdDQiPg0KCQk8cGF0aCBjbGFzcz0ic3Q3IiBkPSJNMzg3LDQ2MC41bDEzLjYsMTZsNC4yLTE2SDM4N3ogTTM2Ny4zLDQzNy40bDEyLjEsMTQuMmgyNy44bDMuOC0xNC4ySDM2Ny4zeiBNMzQ3LjQsNDE0LjFsMTIuMywxNC41aDUzLjYNCgkJCWwzLjktMTQuNUgzNDcuNHogTTMyNy41LDM5MC43bDEyLjMsMTQuNWg3OS43bDMuOS0xNC41SDMyNy41eiBNMzA3LjcsMzY3LjRsMTIuMywxNC41aDEwNS44bDMuOS0xNC41SDMwNy43eiBNMjg5LjIsMzQ0bC0wLjUsMQ0KCQkJbDExLjUsMTMuNUg0MzJsMy45LTE0LjRMMjg5LjIsMzQ0eiIvPg0KCQk8cGF0aCBjbGFzcz0ic3Q4IiBkPSJNNDIxLjIsNDc1LjNoNjYuN2w4LjktMzMuNkg0NjZsNC4yLTE1LjdoMzAuOGw4LjctMzIuN2gtMzAuN2w0LjItMTUuN2gzMC43bDguOS0zMy41aC02Ni41bC00LjIsMTUuOWg2MC40DQoJCQlsLTEuNiw2aC02MC40bC00LjYsMTcuNGgzMC41bC0xLjYsNS45aC0zMC41bC00LjcsMTcuNWg2MC40bC0xLjYsNmgtNjAuNGwtNC42LDE3LjNoMzAuNWwtMS42LDZoLTMwLjVsLTQuNiwxNy4zaDYwLjRsLTEuNiw2DQoJCQloLTYwLjRMNDIxLjIsNDc1LjN6IE01MDQuMSw0NzUuM2gzNC41bDE5LjYtNzUuNmwtMC4zLDcuMWg0MC4zbC0zLDZoLTM3LjRsLTAuNiwxNy4zaDI5LjRsLTMsNmgtMjYuNWwtMC42LDE3LjNoMTguNGwtMyw2SDU1Ng0KCQkJbC0wLjYsMTZoMTQuM2wzOC4xLTc1LjdsLTEuOSw3LjJoMjcuNWwtMS41LDZoLTI3LjVsLTQuNiwxNy4zaDI3LjJsLTEuNSw2aC0yNy4ybC00LjYsMTcuM0g2MjFsLTEuNSw2SDU5MmwtNC4zLDE2aDMyLjkNCgkJCUw2NTUuNCwzNDRoLTQyLjhMNjA0LDM2MGw0MS40LDAuMWwtMS41LDZsLTQzLjEtMC4xbC05LjQsMTcuNGw0OC4xLDAuMWwtMS41LDUuOWwtNDkuOC0wLjFMNTgzLDM5OWwwLjMtNTVoLTQ0LjJsLTQuMiwxNS45aDQzDQoJCQlsLTAuMSw2aC00NC41bC00LjYsMTcuNGg0OC45bC0wLjEsNS45SDUyN2wtNC43LDE3LjVoMjguMmwtMS42LDZoLTI4LjJsLTQuNiwxNy4zaDI4LjJsLTEuNiw2aC0yOC4ybC00LjYsMTcuM2gyOC4ybC0xLjYsNmgtMjguMg0KCQkJTDUwNC4xLDQ3NS4zeiBNNjU4LjMsNDc1LjNoMzguOGwyMy41LTE2bDEzLjMtNTAuMWwtMTgtMTUuNmgtMjQuM2w0LjktMTcuOGgxMS41bC0xLjgsNy41aDUuOWwwLTAuMWgyNy4zbDYuMi0yMy4zTDcyNy4zLDM0NA0KCQkJaC0zNy41TDY2Ni4zLDM2MGg3My42bC0xLjUsNmgtNzMuOGwtNC43LDE3LjRoMjguMmwtMS41LDUuOWgtMjguM2wtNC43LDE3LjVoNzQuOGwtMS41LDZoLTczbDEzLjEsMTEuNGwyOC41LTAuMWwtMS42LDZoMjguNw0KCQkJbC0xLjUsNmgtMjguOGwtMiw3LjJoLTEzLjFsMS45LTcuMmwtMzMuMywwbC00LjYsMTcuM2g3NS40bC0xLjUsNmgtNzQuNkw2NTguMyw0NzUuM3oiLz4NCgk8L2c+DQo8L2c+DQo8L3N2Zz4NCg==", // Default icon
                iconSize: [50, 50],
                iconAnchor: [15, 30],
                popupAnchor: [0, -30],
            });



            this.warehouses.forEach((warehouse) => {
                const { lat, lng, name_uz, region, district, index, street, geolocation, EMS, one_step } = warehouse.postal_office;
                const polygonCoordinates = warehouse.locations?.locations || [];

                // Latitude va Longitude mavjudligini tekshirish
                if (!lat || !lng) {
                    console.warn(`Ma'lumot yetishmaydi: ${name_uz || "Noma'lum"} (Lat: ${lat}, Lng: ${lng})`);
                    return; // Lat yoki Lng bo'lmasa, bu markerni o'tkazib yuboramiz
                }

                if (
                    (filter === "all") ||
                    (filter === "ems" && EMS === "Bor") ||
                    (filter === "one_step" && one_step === "Bor")
                ) {
                    let markerLat = parseFloat(lat);
                    let markerLng = parseFloat(lng);

                    const marker = L.marker([markerLat, markerLng], { icon: customIcon })
                        .bindPopup(`
                <h3>${name_uz}</h3>
                <p>Viloyat: ${region}</p>
                <p>Tuman: ${district}</p>
                <p>Ko'cha: ${street}</p>
                <p>Indeks: ${index || "Noma'lum"}</p>
                <a href="${geolocation || "#"}" target="_blank">Joylashuv</a>
            `)
                        .on("click", () => {
                            this.drawArea(polygonCoordinates);
                        });

                    this.markers.addLayer(marker);
                }
            });
        },
        drawArea(polygonCoordinates) {
            if (!polygonCoordinates || !polygonCoordinates.length) return;

            // Hududni aniqlash va uni xaritada chizish
            const areaPolygon = L.polygon(polygonCoordinates, {
                color: '#595959',
                weight: 2,
                fillColor: '#97a100',
                fillOpacity: 0.3,
            }).addTo(this.map);

            // Xaritaning ko'rinishini chizilgan hududga moslashtirish
            this.map.fitBounds(areaPolygon.getBounds());
        },
        updateSuggestions() {
            const searchQueryLower = this.searchQuery.toLowerCase();

            this.suggestions = this.warehouses
                .filter((warehouse) => {
                    const { postal_office } = warehouse;
                    return (
                        (postal_office.index || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.name_uz || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.name_eng || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.name_ru || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.region || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.street || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.district || "").toLowerCase().includes(searchQueryLower)
                    );
                })
                .map(warehouse => {
                    const { index, name_uz, name_ru, region, district, street } = warehouse.postal_office || {};

                    // Qidiruvga mos kelgan maydonni aniqlash
                    if ((index || "").toLowerCase().includes(this.searchQuery.toLowerCase())) {
                        return `Indeks: ${index}`;
                    } else if ((name_uz || "").toLowerCase().includes(this.searchQuery.toLowerCase())) {
                        return `${index}: ${name_uz}`;
                    } else if ((name_ru || "").toLowerCase().includes(this.searchQuery.toLowerCase())) {
                        return `${index}: ${name_ru}`;
                    } else if ((region || "").toLowerCase().includes(this.searchQuery.toLowerCase())) {
                        return `${index}: ${region}`;
                    } else if ((district || "").toLowerCase().includes(this.searchQuery.toLowerCase())) {
                        return `${index}: ${district}`;
                    } else if ((street || "").toLowerCase().includes(this.searchQuery.toLowerCase())) {
                        return `${index}: ${street}`;
                    } else {
                        return "Ma'lumot topilmadi";
                    }
                })
                .slice(0, 3); // Faqat 3 ta natija
        }
        ,

        selectSuggestion(suggestion) {
            this.searchQuery = suggestion; // Qidiruv qatoriga tanlangan taklifni o'rnating
            const selectedWarehouse = this.warehouses.find((warehouse) => {
                const { postal_office } = warehouse;
                const { index, name_uz, region, district, street } = postal_office || {};
                return (
                    suggestion.includes(index) ||
                    suggestion.includes(name_uz) ||
                    suggestion.includes(region) ||
                    suggestion.includes(street) ||
                    suggestion.includes(district)
                );
            });

            if (selectedWarehouse) {
                this.focusMarker(selectedWarehouse.postal_office); // Xaritada markerga o'ting
            }
        },
        focusMarker(postalOffice) {
            const { lat, lng } = postalOffice;

            if (lat && lng) {
                const markerLat = parseFloat(lat);
                const markerLng = parseFloat(lng);

                this.map.setView([markerLat, markerLng], 14); // Xaritada kerakli joyni ko'rsatish

                // Aloqa bo'limining popup'ini ochish
                const popup = L.popup()
                    .setLatLng([markerLat, markerLng])
                    .setContent(`
                    <h3>${postalOffice.name_uz}</h3>
                    <p>Viloyat: ${postalOffice.region}</p>
                    <p>Tuman: ${postalOffice.district}</p>
                    <p>Ko'cha: ${postalOffice.street}</p>
                    <p>Indeks: ${postalOffice.index}</p>
                    <a href="${postalOffice.geolocation || "#"}" target="_blank">Joylashuv</a>
                `);
                popup.openOn(this.map);
            }
        },
        async searchData() {
            try {
                const response = await fetch(`https://new.pochta.uz/api/v1/maps/post/offices/`);
                const data = await response.json();

                const searchQueryLower = this.searchQuery.toLowerCase();
                this.warehouses = data.result.filter((warehouse) => {
                    const { postal_office } = warehouse;
                    return (
                        (postal_office.index || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.name_uz || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.name_eng || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.name_ru || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.region || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.district || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.mfy || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.street || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.village || "").toLowerCase().includes(searchQueryLower) ||
                        (postal_office.house || "").toLowerCase().includes(searchQueryLower)
                    );
                });

                this.updateSuggestions(); // Takliflarni yangilash
                this.addMarkersToCluster(); // Markerlarni xaritada yangilash
            } catch (error) {
                console.error("Error searching data:", error);
            }
        },
        filterData(filter) {
            this.activeButton = filter; // Faol tugmani o'rnatish
            this.addMarkersToCluster(filter);
            this.searchQuery = ""; // Qidirish maydonini tozalash
            this.suggestions = []; // Takliflarni tozalash

            this.fetchWarehouses(); // API dan barcha ma'lumotlarni qayta olish

            setTimeout(() => {
                if (filter === "one_step") {
                    this.warehouses = this.warehouses.filter(warehouse => warehouse.postal_office.one_step === "Bor");
                } else if (filter === "ems") {
                    this.warehouses = this.warehouses.filter(warehouse => warehouse.postal_office.EMS === "Bor");
                }

                this.addMarkersToCluster(filter); // So'ralgan filtr bo'yicha markerlarni yangilash
            }, 500); // Ma'lumotni olish va qayta ishlash uchun qisqa kutish
        },
    },
});
</script>

<style scoped>
.filter-buttons-wrapper {
    display: flex;
    gap: 10px;
    /* Tugmalar orasidagi masofa */
    justify-content: center;
}


/* Responsive Styling */
@media (max-width: 780px) {
    .flex-container {
        display: flex;
        flex-direction: column;
        align-items: stretch;
    }

    .filter-buttons-wrapper {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        margin-bottom: 10px;
    }


    .search-wrapper {
        flex-direction: row;
        align-items: center;
        /* gap: 5px; */
    }

    .search-form input {
        border-radius: 4px;
        /* margin-bottom: 10px; */
    }

    .search-form button {
        border-radius: 4px;
    }
}

body {
    margin: 0;
    font-family: Arial, sans-serif;
}

#map {
    display: flex;
    flex-direction: column;
}

.map-container {
    width: 100%;
    max-width: 1200px;
    height: 650px;
    margin: 0 auto;
    border: 1px solid #ccc;
    border-radius: 8px;
    overflow: hidden;
}

#map.leaflet-map-container {
    width: 100%;
    height: 100%;
}

.container__customizemain {
    max-width: 1600px;
    background: #F8F9FC;
    position: relative;
    margin: 0 auto;
    margin-top: 120px;
}

.flex-container {
    display: flex;
    align-items: center;
    gap: 10px;
}

.suggestions-list {
    list-style: none;
    margin: 0;
    padding: 0;
    width: 100%;
    max-height: 113px;
    overflow-y: auto;
    border: 1px solid #183e98;
    border-radius: 4px;
    z-index: 1000;
    margin-top: 150px;
    background-color: #183e98 !important;
}

.suggestion-item {
    padding: 8px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.suggestion-item:hover {
    background-color: #f07824;
}

.burchak:hover {
    background-color: #f07824;
    /* Button background turns yellow on hover */
    color: #ffffff;
    /* Text color turns white */
}

.burchak {
    border-radius: 4px;
    border-top-left-radius: 4px;
    border-top-right-radius: 4px;
    border-bottom-right-radius: 4px;
    border-bottom-left-radius: 4px;
}

.active-btn {
    background-color: #f07824;
    /* Tugmaning faol holatdagi rangi */
    color: white;
    /* Matn rangi */
    border: 1px solid #f07824;
    /* Ramka rangi */
}
</style>
